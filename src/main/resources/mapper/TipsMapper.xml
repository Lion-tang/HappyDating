<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dating.DAO.TipsDAO">
    <!--插入条件-->
    <sql id="key">
        <trim suffixOverrides=",">
            <if test="userName!=null">
                user_name,
            </if>
            <if test="info!=null ">
                info,
            </if>
        </trim>
    </sql>

    <!--插入值-->
    <sql id="values">
        <trim suffixOverrides=",">
            <if test="userName!=null">
                #{userName},
            </if>
            <if test="info!=null ">
                #{info},
            </if>
        </trim>
    </sql>

    <insert id="createTip" parameterType="Tips">
        INSERT INTO tips(<include refid="key"/>)
        VALUE (<include refid="values"/>)
    </insert>
    <!-- 通过字段名字映射 -->
    <sql id="base_select">
        SELECT
        id                  AS id,
        user_name           AS userName,
        info                AS info,
        create_time         AS createTime,
        update_time         AS updateTime
        FROM tips
    </sql>
    <sql id="order_condition">
        order by updateTime desc
    </sql>
    <select id="getTips" resultType="com.dating.pojo.Tips">
        <include refid="base_select"/>
        <where>
            id >= 1
        </where>
        <include refid="order_condition"/>
    </select>


</mapper>